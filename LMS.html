<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LMS Dashboard</title>
    <link rel="stylesheet" href="styleb.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
        crossorigin="anonymous"></script>
</head>
<body>
    <!-- Navigation Bar -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark position-sticky">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">LMS Dashboard</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
                aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                    <li class="nav-item">
                        <a class="nav-link" aria-current="page" href="./index.html">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" href="./LMS.html">LMS</a>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button"
                            data-bs-toggle="dropdown" aria-expanded="false">
                            Crew Management
                        </a>
                        <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                            <li><a class="dropdown-item" href="#">Crew Detail</a></li>
                            <li><a class="dropdown-item" href="#">Crew schedule</a></li>
                            <li>
                                <hr class="dropdown-divider">
                            </li>
                            <li><a class="dropdown-item" href="#">Something else here</a></li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
    <div id="maincontainer">
        <div class="main_container container-fluid" id="win1">
            <!-- Main Container -->
            <div class="container-fluid mt-4 col-md-8 resizable-top" id="win3">
                <!-- Overview Section -->
                <div class="row">
                    <div class="col-md-6">
                        <div class="overview-box">
                            <h3>LMS Overview</h3>
                            <ul>
                                <li>LMS Location: <span>Rajiv Nagar</span></li>
                                <li>LMS ID: <span>204</span></li>
                                <li>Operational Route ID: <span>62</span></li>
                                <li>Number of Buses: <span id="number_of_buses">24</span></li>
                                <li>Number of Crews: <span id="number_of_crew">24</span></li>
                            </ul>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="live-status-box">
                            <h3>Live Status</h3>
                            <ul>
                                <li>Buses in Operation: <span id="buses_in_operation">18</span></li>
                                <li>Next Arrival Time: <span id="next_arrival">12:45 PM</span></li>
                                <li>Total Routes Covered: <span id="total_routes">5</span></li>
                                <li>Total Distance Covered Today: <span id="distance_covered">350 km</span></li>
                                <li>Breakdowns Reported: <span id="breakdowns_reported">0</span></li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- Performance Metrics Section -->
                <div class="row mt-4">
                    <div class="col-md-6">
                        <div class="performance-metrics">
                            <h3>Performance Metrics</h3>
                            <ul>
                                <li>Avg Bus Frequency: <span id="bus_frequency">15 min</span></li>
                                <li>Bus On-Time Percentage: <span id="on_time_percent">85%</span></li>
                                <li>Bus Utilization: <span id="bus_utilization">80%</span></li>
                                <li>Fuel Efficiency (L/100km): <span id="fuel_efficiency">30 L</span></li>
                            </ul>
                            <div class="canvas_div">
                                <canvas id="busPerformanceChart" width="400" height="200"></canvas>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="crew-performance">
                            <h3>Crew Information</h3>
                            <ul>
                                <li>Available Crew: <span id="available_crew">20</span></li>
                                <li>On Break: <span id="crew_on_break">4</span></li>
                                <li>Crew Shift Status: <span id="crew_shift_status">Active</span></li>
                                <li>Total Crew Hours Worked: <span id="crew_hours">120</span></li>
                                <li>Absent Crew: <span id="absent_crew">2</span></li>
                            </ul>
                            <div>
                                <canvas id="crewBreakChart" width="400" height="200"></canvas>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Additional Info Section -->
                <div class="row mt-4">
                    <div class="col-md-6">
                        <div class="additional-info">
                            <h3>Additional Information</h3>
                            <ul>
                                <li>Current Weather Conditions: <span id="weather_conditions">Sunny, 32Â°C</span></li>
                                <li>Accidents Reported: <span id="accidents_reported">0</span></li>
                                <li>Complaints Filed Today: <span id="complaints_reported">2</span></li>
                            </ul>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="historical-data">
                            <h3>Historical Data</h3>
                            <ul>
                                <li>Last Week Avg Frequency: <span id="last_week_avg_frequency">14 min</span></li>
                                <li>On-Time Performance Last Month: <span id="last_month_ontime">88%</span></li>
                                <li>Fuel Efficiency Last Month: <span id="last_month_fuel_efficiency">32 L</span></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Bus info Contianer -->
            <div class="livemap_interaction resizable-bottom" id="win4">
                <!-- <h3 style="position: absolute">Live map of LMS</h3> -->


                <iframe id="mapsrc"
                    src="https://www.google.com/maps/embed/v1/directions?key=AIzaSyCUcTn8kJIMi08PLSZDkc1dSAfUO5WOwPk&origin=Qutub+Minar,New+Delhi&destination=Supreme+Court+of+India,New+Delhi&mode=driving&maptype=roadmap&zoom=14"
                    allowfullscreen width="100%" height="100%"></iframe>


            </div>
        </div>
        <div class="bus-schedule-section container-fluid" wid="win2">
            <h3>Bus Scheduled</h3>
            <div class="bus_scheduled_contianer">
                <div class="sidebar container-fluid">
                    <div class="scheduled_div container-fluid" data-origin="Connaught Place"
                        data-destination="Rajouri Garden">
                        <div class="businfo_div">
                            <div class="businfo">
                                <span class="bus_number">101</span>
                                <div class="bus_details">
                                    <div class="detail_item">
                                        <span class="detail_label">Origin:</span>
                                        <span class="detail_value">Connaught Place</span>
                                    </div>
                                    <div class="detail_item">
                                        <span class="detail_label">Destination:</span>
                                        <span class="detail_value">Rajouri Garden</span>
                                    </div>
                                    <div class="detail_item">
                                        <span class="detail_label">Nearest Station:</span>
                                        <span class="detail_value">Central Secretariat</span>
                                    </div>
                                    <div class="detail_item">
                                        <span class="detail_label">Next Station:</span>
                                        <span class="detail_value">Kalkaji Mandir</span>
                                    </div>
                                    <div class="detail_item">
                                        <span class="detail_label">Estimated Time:</span>
                                        <span class="detail_value">25 mins</span>
                                    </div>
                                    <div class="detail_item">
                                        <span class="detail_label">Average Speed:</span>
                                        <span class="detail_value">30 km/h</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="driver_info">
                            <div class="driver_image">
                                <img src="avatar.jpg" alt="Driver" />
                            </div>
                            <div class="driver_details">
                                <span class="drivername">John Doe</span>
                                <span class="driverage">45 years</span>
                            </div>
                        </div>
                        <div class="bus_actions">
                            <button class="action_button">Track Bus</button>
                            <button class="action_button">Contact Driver</button>
                            <button class="action_button view_map" onclick="updateMap(this)">View Map</button>
                        </div>
                    </div>

                    <!-- Additional bus entries here (same structure) -->
                    <!-- Example entry -->
                    <div class="scheduled_div container-fluid" data-origin="Karol Bagh"
                        data-destination="Dwarka Sector 21">
                        <div class="businfo_div">
                            <div class="businfo">
                                <span class="bus_number">102</span>
                                <div class="bus_details">
                                    <div class="detail_item">
                                        <span class="detail_label">Origin:</span>
                                        <span class="detail_value">Karol Bagh</span>
                                    </div>
                                    <div class="detail_item">
                                        <span class="detail_label">Destination:</span>
                                        <span class="detail_value">Dwarka Sector 21</span>
                                    </div>
                                    <div class="detail_item">
                                        <span class="detail_label">Nearest Station:</span>
                                        <span class="detail_value">Rajiv Chowk</span>
                                    </div>
                                    <div class="detail_item">
                                        <span class="detail_label">Next Station:</span>
                                        <span class="detail_value">Dwarka Sector 12</span>
                                    </div>
                                    <div class="detail_item">
                                        <span class="detail_label">Estimated Time:</span>
                                        <span class="detail_value">35 mins</span>
                                    </div>
                                    <div class="detail_item">
                                        <span class="detail_label">Average Speed:</span>
                                        <span class="detail_value">28 km/h</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="driver_info">
                            <div class="driver_image">
                                <img src="avatar.jpg" alt="Driver" />
                            </div>
                            <div class="driver_details">
                                <span class="drivername">Jane Smith</span>
                                <span class="driverage">38 years</span>
                            </div>
                        </div>
                        <div class="bus_actions">
                            <button class="action_button">Track Bus</button>
                            <button class="action_button">Contact Driver</button>
                            <button class="action_button view_map" onclick="updateMap(this)">View Map</button>
                        </div>
                    </div>
                    <div class="scheduled_div container-fluid" data-origin="Connaught Place"
                    data-destination="Rajouri Garden">
                    <div class="businfo_div">
                        <div class="businfo">
                            <span class="bus_number">101</span>
                            <div class="bus_details">
                                <div class="detail_item">
                                    <span class="detail_label">Origin:</span>
                                    <span class="detail_value">Connaught Place</span>
                                </div>
                                <div class="detail_item">
                                    <span class="detail_label">Destination:</span>
                                    <span class="detail_value">Rajouri Garden</span>
                                </div>
                                <div class="detail_item">
                                    <span class="detail_label">Nearest Station:</span>
                                    <span class="detail_value">Central Secretariat</span>
                                </div>
                                <div class="detail_item">
                                    <span class="detail_label">Next Station:</span>
                                    <span class="detail_value">Kalkaji Mandir</span>
                                </div>
                                <div class="detail_item">
                                    <span class="detail_label">Estimated Time:</span>
                                    <span class="detail_value">25 mins</span>
                                </div>
                                <div class="detail_item">
                                    <span class="detail_label">Average Speed:</span>
                                    <span class="detail_value">30 km/h</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="driver_info">
                        <div class="driver_image">
                            <img src="avatar.jpg" alt="Driver" />
                        </div>
                        <div class="driver_details">
                            <span class="drivername">John Doe</span>
                            <span class="driverage">45 years</span>
                        </div>
                    </div>
                    <div class="bus_actions">
                        <button class="action_button">Track Bus</button>
                        <button class="action_button">Contact Driver</button>
                        <button class="action_button view_map" onclick="updateMap(this)">View Map</button>
                    </div>
                </div>

                <!-- Additional bus entries here (same structure) -->
                <!-- Example entry -->
                <div class="scheduled_div container-fluid" data-origin="Karol Bagh"
                    data-destination="Dwarka Sector 21">
                    <div class="businfo_div">
                        <div class="businfo">
                            <span class="bus_number">102</span>
                            <div class="bus_details">
                                <div class="detail_item">
                                    <span class="detail_label">Origin:</span>
                                    <span class="detail_value">Karol Bagh</span>
                                </div>
                                <div class="detail_item">
                                    <span class="detail_label">Destination:</span>
                                    <span class="detail_value">Dwarka Sector 21</span>
                                </div>
                                <div class="detail_item">
                                    <span class="detail_label">Nearest Station:</span>
                                    <span class="detail_value">Rajiv Chowk</span>
                                </div>
                                <div class="detail_item">
                                    <span class="detail_label">Next Station:</span>
                                    <span class="detail_value">Dwarka Sector 12</span>
                                </div>
                                <div class="detail_item">
                                    <span class="detail_label">Estimated Time:</span>
                                    <span class="detail_value">35 mins</span>
                                </div>
                                <div class="detail_item">
                                    <span class="detail_label">Average Speed:</span>
                                    <span class="detail_value">28 km/h</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="driver_info">
                        <div class="driver_image">
                            <img src="avatar.jpg" alt="Driver" />
                        </div>
                        <div class="driver_details">
                            <span class="drivername">Jane Smith</span>
                            <span class="driverage">38 years</span>
                        </div>
                    </div>
                    <div class="bus_actions">
                        <button class="action_button">Track Bus</button>
                        <button class="action_button">Contact Driver</button>
                        <button class="action_button view_map" onclick="updateMap(this)">View Map</button>
                    </div>
                </div>
                </div>

            </div>
        </div>
    </div>
    <script>
        function updateMap(button) {
            // Get the parent element with bus info
            const busEntry = button.closest('.scheduled_div');
            // Get origin and destination from data attributes
            const origin = busEntry.getAttribute('data-origin');
            const destination = busEntry.getAttribute('data-destination');
            // Encode URI components
            const originEncoded = encodeURIComponent(origin);
            const destinationEncoded = encodeURIComponent(destination);
            // Create the Google Maps URL
            const mapUrl = `https://www.google.com/maps/embed/v1/directions?key=AIzaSyCUcTn8kJIMi08PLSZDkc1dSAfUO5WOwPk&origin=${originEncoded}&destination=${destinationEncoded}&mode=driving&maptype=roadmap&zoom=14`;
            // Set the iframe source
            document.getElementById('mapsrc').src = mapUrl;
        }
    </script>

    <!-- Include Chart.js library -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        document.addEventListener(
            "DOMContentLoaded", () => {
                // document.getElementById("main").style.width = window.innerWidth + "px";
                // document.getElementById("main").style.height = window.innerHeight + "px";

                var sizes = {
                    "win1": 0.80

                }
                Resizable.initialise("maoncontainer", sizes, 8);
            }

        );

        window.addEventListener("resize", () => {
            setTimeout(() => {
                Resizable.activeContentWindows[0].changeSize(window.innerWidth, window.innerHeight);
                Resizable.activeContentWindows[0].childrenResize();
            }, 100);
        });
    </script>

    <!-- Script for generating the graphs -->
    <script>
        // Bus Performance Chart
        const ctx1 = document.getElementById('busPerformanceChart').getContext('2d');
        const busPerformanceChart = new Chart(ctx1, {
            type: 'line',
            data: {
                labels: ['6 AM', '9 AM', '12 PM', '3 PM', '6 PM', '9 PM'],
                datasets: [{
                    label: 'Bus Utilization (%)',
                    data: [65, 75, 85, 80, 70, 60],
                    borderColor: 'rgba(75, 192, 192, 1)',
                    borderWidth: 2,
                    fill: false
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
            }
        });

        // Crew Break Chart
        const ctx2 = document.getElementById('crewBreakChart').getContext('2d');
        const crewBreakChart = new Chart(ctx2, {
            type: 'doughnut',
            data: {
                labels: ['Active', 'On Break', 'Inactive'],
                datasets: [{
                    data: [20, 4, 0],
                    backgroundColor: ['#28a745', '#ffc107', '#dc3545'],
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
            }
        });
    </script>
</body>

</html>